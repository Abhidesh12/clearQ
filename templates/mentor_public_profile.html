{% extends "base.html" %}

{% block title %}{{ mentor.full_name }} - ClearQ Mentor{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-6 max-w-6xl">
    <!-- Mobile Layout -->
    <div class="md:hidden">
        <!-- Profile Header -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4">
            <div class="flex items-start justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-16 h-16 rounded-xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center">
                        <span class="text-white text-2xl font-bold">{{ (mentor.full_name or mentor.username)[0].upper() }}</span>
                    </div>
                    <div>
                        <h2 class="text-lg font-bold text-gray-900">{{ mentor.full_name or mentor.username }}</h2>
                        <p class="text-sm text-gray-600">{{ mentor.job_title }}</p>
                        <div class="flex items-center gap-2 mt-1">
                            <span class="text-amber-500 font-bold text-sm">4.8</span>
                            <div class="flex items-center">
                                <i class="fas fa-star text-amber-500 text-xs"></i>
                                <span class="text-gray-500 text-xs ml-1">(118 Reviews)</span>
                            </div>
                        </div>
                    </div>
                </div>
                <span class="px-3 py-1 bg-green-50 text-green-700 rounded-full text-xs font-medium">
                    Verified
                </span>
            </div>
        </div>
        
        <!-- Quick Stats -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4">
            <div class="grid grid-cols-3 gap-4">
                <div class="text-center">
                    <p class="text-lg font-bold text-gray-900">{{ mentor.profile_views }}</p>
                    <p class="text-xs text-gray-500">Profile Views</p>
                </div>
                <div class="text-center border-x border-gray-100">
                    <p class="text-lg font-bold text-gray-900">{{ total_sessions }}</p>
                    <p class="text-xs text-gray-500">Sessions</p>
                </div>
                <div class="text-center">
                    <p class="text-lg font-bold text-gray-900">{{ mentor.experience }}</p>
                    <p class="text-xs text-gray-500">Experience</p>
                </div>
            </div>
        </div>
        
        <!-- Company Info -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4">
            <div class="flex items-center gap-3">
                <i class="fas fa-building text-primary text-lg"></i>
                <div>
                    <p class="text-sm font-medium text-gray-900">{{ mentor.company }}</p>
                    <p class="text-xs text-gray-500">{{ mentor.domain }}</p>
                </div>
            </div>
            <div class="mt-3 flex items-center gap-3">
                <i class="fas fa-rupee-sign text-primary text-lg"></i>
                <div>
                    <p class="text-sm font-medium text-gray-900">₹{{ mentor.price }}/session</p>
                    <p class="text-xs text-gray-500">Per 30 min session</p>
                </div>
            </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="grid grid-cols-2 gap-3 mb-4">
            <button onclick="shareProfile()" 
                    class="border border-primary text-primary rounded-xl py-3 font-medium text-sm flex items-center justify-center gap-2">
                <i class="fas fa-share-alt"></i>
                Share Profile
            </button>
            <a href="{{ url_for('explore') }}" 
               class="bg-gradient-to-r from-primary to-secondary text-white rounded-xl py-3 font-medium text-sm flex items-center justify-center gap-2">
                <i class="fas fa-calendar-check"></i>
                Book Session
            </a>
        </div>
        
        <!-- Availability -->
        {% if mentor.availability %}
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4">
            <div class="flex items-center gap-2 mb-3">
                <i class="fas fa-calendar-check text-primary"></i>
                <h4 class="font-semibold text-gray-900">Availability</h4>
            </div>
            <p class="text-sm text-gray-700">{{ mentor.availability }}</p>
        </div>
        {% endif %}
        
        <!-- Skills -->
        {% if mentor.skills %}
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4">
            <h4 class="font-semibold text-gray-900 mb-3">Skills</h4>
            <div class="flex flex-wrap gap-2">
                {% for skill in mentor.skills.split(',') %}
                <span class="px-3 py-1.5 bg-gray-100 text-gray-800 rounded-lg text-xs font-medium">
                    {{ skill.strip() }}
                </span>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        
        <!-- Bio -->
        {% if mentor.bio %}
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4">
            <h4 class="font-semibold text-gray-900 mb-3">About</h4>
            <p class="text-sm text-gray-700 leading-relaxed">{{ mentor.bio }}</p>
        </div>
        {% endif %}
    </div>
    
    <!-- Desktop Layout -->
    <div class="hidden md:grid md:grid-cols-3 gap-6">
        <!-- Left Column -->
        <div class="space-y-6">
            <!-- Profile Card -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <div class="text-center">
                    <div class="w-24 h-24 rounded-xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center mx-auto mb-4">
                        <span class="text-white text-3xl font-bold">{{ (mentor.full_name or mentor.username)[0].upper() }}</span>
                    </div>
                    <h2 class="text-xl font-bold text-gray-900">{{ mentor.full_name or mentor.username }}</h2>
                    <p class="text-gray-600 mb-1">{{ mentor.job_title }}</p>
                    <div class="flex items-center justify-center gap-2">
                        <span class="text-amber-500 font-bold">4.8</span>
                        <div class="flex items-center">
                            <i class="fas fa-star text-amber-500 text-sm"></i>
                            <span class="text-gray-500 text-sm ml-1">(118 Reviews)</span>
                        </div>
                    </div>
                </div>
                
                <!-- Verification -->
                <div class="flex justify-center mt-4">
                    <span class="px-4 py-1.5 bg-green-50 text-green-700 rounded-full text-sm font-medium">
                        <i class="fas fa-check-circle mr-1"></i>
                        Verified Mentor
                    </span>
                </div>
                
                <!-- Quick Stats -->
                <div class="grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-gray-100">
                    <div class="text-center">
                        <p class="text-lg font-bold text-gray-900">{{ mentor.profile_views }}</p>
                        <p class="text-xs text-gray-500">Profile Views</p>
                    </div>
                    <div class="text-center border-x border-gray-100">
                        <p class="text-lg font-bold text-gray-900">{{ total_sessions }}</p>
                        <p class="text-xs text-gray-500">Sessions</p>
                    </div>
                    <div class="text-center">
                        <p class="text-lg font-bold text-gray-900">{{ mentor.experience }}</p>
                        <p class="text-xs text-gray-500">Experience</p>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="space-y-3 mt-6">
                    <button onclick="shareProfile()" 
                            class="w-full border border-primary text-primary rounded-xl py-3 font-medium flex items-center justify-center gap-2 hover:bg-primary/5 transition-colors">
                        <i class="fas fa-share-alt"></i>
                        Share Profile
                    </button>
                    <a href="{{ url_for('explore') }}" 
                       class="w-full bg-gradient-to-r from-primary to-secondary text-white rounded-xl py-3 font-medium flex items-center justify-center gap-2 hover:shadow-md transition-shadow">
                        <i class="fas fa-calendar-check"></i>
                        Book Session
                    </a>
                </div>
            </div>
            
            <!-- Company & Pricing -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5">
                <div class="space-y-4">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center">
                            <i class="fas fa-building text-blue-600"></i>
                        </div>
                        <div>
                            <p class="font-semibold text-gray-900">{{ mentor.company }}</p>
                            <p class="text-sm text-gray-500">{{ mentor.domain }}</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-lg bg-green-50 flex items-center justify-center">
                            <i class="fas fa-rupee-sign text-green-600"></i>
                        </div>
                        <div>
                            <p class="font-semibold text-gray-900">₹{{ mentor.price }}/session</p>
                            <p class="text-sm text-gray-500">Per 30 min session</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Right Column -->
        <div class="md:col-span-2 space-y-6">
            <!-- Availability -->
            {% if mentor.availability %}
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5">
                <div class="flex items-center gap-2 mb-4">
                    <i class="fas fa-calendar-check text-primary text-lg"></i>
                    <h3 class="font-semibold text-gray-900">Availability</h3>
                </div>
                <p class="text-gray-700">{{ mentor.availability }}</p>
            </div>
            {% endif %}
            
            <!-- Skills -->
            {% if mentor.skills %}
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5">
                <h3 class="font-semibold text-gray-900 mb-4">Skills</h3>
                <div class="flex flex-wrap gap-2">
                    {% for skill in mentor.skills.split(',') %}
                    <span class="px-4 py-2 bg-gray-100 text-gray-800 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors">
                        {{ skill.strip() }}
                    </span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            <!-- Bio -->
            {% if mentor.bio %}
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5">
                <h3 class="font-semibold text-gray-900 mb-4">About</h3>
                <p class="text-gray-700 leading-relaxed">{{ mentor.bio }}</p>
            </div>
            {% endif %}
            
            <!-- Sessions Stats -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5">
                <h3 class="font-semibold text-gray-900 mb-4">Mentorship Stats</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="text-center p-3 bg-blue-50 rounded-lg">
                        <p class="text-2xl font-bold text-blue-700">1,114</p>
                        <p class="text-sm text-blue-600">Total Sessions</p>
                    </div>
                    <div class="text-center p-3 bg-green-50 rounded-lg">
                        <p class="text-2xl font-bold text-green-700">99%</p>
                        <p class="text-sm text-green-600">Avg. Attendance</p>
                    </div>
                    <div class="text-center p-3 bg-purple-50 rounded-lg">
                        <p class="text-2xl font-bold text-purple-700">4.8</p>
                        <p class="text-sm text-purple-600">Avg. Rating</p>
                    </div>
                    <div class="text-center p-3 bg-amber-50 rounded-lg">
                        <p class="text-2xl font-bold text-amber-700">118</p>
                        <p class="text-sm text-amber-600">Reviews</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function shareProfile() {
    const profileUrl = window.location.href;
    
    if (navigator.share) {
        navigator.share({
            title: 'Check out this mentor on ClearQ',
            text: '{{ mentor.full_name or mentor.username }} - {{ mentor.job_title }} at {{ mentor.company }}',
            url: profileUrl,
        })
        .then(() => console.log('Shared successfully'))
        .catch((error) => console.log('Error sharing:', error));
    } else {
        navigator.clipboard.writeText(profileUrl)
            .then(() => {
                // Show toast notification
                const toast = document.createElement('div');
                toast.className = 'fixed bottom-4 right-4 bg-gray-900 text-white px-4 py-2 rounded-lg shadow-lg text-sm z-50';
                toast.textContent = 'Profile link copied to clipboard!';
                document.body.appendChild(toast);
                setTimeout(() => toast.remove(), 3000);
            })
            .catch(() => {
                const tempInput = document.createElement('input');
                tempInput.value = profileUrl;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);
                
                const toast = document.createElement('div');
                toast.className = 'fixed bottom-4 right-4 bg-gray-900 text-white px-4 py-2 rounded-lg shadow-lg text-sm z-50';
                toast.textContent = 'Profile link copied to clipboard!';
                document.body.appendChild(toast);
                setTimeout(() => toast.remove(), 3000);
            });
    }
}
</script>

<style>
@media (max-width: 768px) {
    .container {
        padding-left: 1rem;
        padding-right: 1rem;
    }
}
</style>
{% endblock %}
